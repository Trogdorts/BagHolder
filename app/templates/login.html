{% extends "base.html" %}
{% block content %}
<div class="mx-auto flex w-full max-w-xl flex-col gap-6 rounded-lg border border-neutral-800 bg-neutral-950 p-6 shadow-xl">
  <div>
    <h1 class="text-2xl font-semibold text-neutral-50">Welcome back</h1>
    <p class="mt-1 text-sm text-neutral-400">Sign in to access your trading dashboard.</p>
  </div>

  {% if login_error %}
    <div class="alert alert-error">
      <p class="text-sm">{{ login_error }}</p>
    </div>
  {% endif %}

  <form method="post" action="/login" class="space-y-4">
    <div>
      <label class="block text-sm font-medium text-neutral-200" for="username">Username</label>
      <input id="username"
             name="username"
             type="text"
             autocomplete="username"
             required
             value="{{ submitted_username if submitted_username is defined else '' }}"
             class="mt-1 w-full rounded border border-neutral-700 bg-neutral-900 px-3 py-2 text-neutral-100 focus:outline-none focus:ring-2 focus:ring-neutral-500" />
    </div>
    <div>
      <label class="block text-sm font-medium text-neutral-200" for="password">Password</label>
      <input id="password"
             name="password"
             type="password"
             autocomplete="current-password"
             required
             class="mt-1 w-full rounded border border-neutral-700 bg-neutral-900 px-3 py-2 text-neutral-100 focus:outline-none focus:ring-2 focus:ring-neutral-500" />
    </div>
    <button type="submit" class="btn btn-primary w-full py-2 text-sm">Sign in</button>
  </form>

  {% if allow_registration %}
    <div class="space-y-4 border-t border-neutral-800 pt-4">
      <div>
        <h2 class="text-lg font-semibold text-neutral-50">Create admin account</h2>
        <p class="mt-1 text-sm text-neutral-400">No users detected. Create the first account to secure your data. The first user becomes the administrator.</p>
      </div>

      {% if registration_error %}
        <div class="alert alert-error">
          <p class="text-sm">{{ registration_error }}</p>
        </div>
      {% endif %}

      <form method="post" action="/login/register" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-neutral-200" for="new_username">Username</label>
          <input id="new_username"
                 name="username"
                 type="text"
                 required
                 value="{{ submitted_username if submitted_username is defined else '' }}"
                 class="mt-1 w-full rounded border border-neutral-700 bg-neutral-900 px-3 py-2 text-neutral-100 focus:outline-none focus:ring-2 focus:ring-neutral-500" />
        </div>
        <div>
          <label class="block text-sm font-medium text-neutral-200" for="new_password">Password</label>
          <input id="new_password"
                 name="password"
                 type="password"
                 required
                 minlength="8"
                 class="mt-1 w-full rounded border border-neutral-700 bg-neutral-900 px-3 py-2 text-neutral-100 focus:outline-none focus:ring-2 focus:ring-neutral-500" />
        </div>
        <div>
          <label class="block text-sm font-medium text-neutral-200" for="confirm_password">Confirm password</label>
          <input id="confirm_password"
                 name="confirm_password"
                 type="password"
                 required
                 minlength="8"
                 class="mt-1 w-full rounded border border-neutral-700 bg-neutral-900 px-3 py-2 text-neutral-100 focus:outline-none focus:ring-2 focus:ring-neutral-500" />
        </div>
        <button type="submit" class="btn btn-outline-primary w-full py-2 text-sm">Create account</button>
      </form>
    </div>
  {% endif %}
</div>
{% endblock %}
