{% extends "base.html" %}
{% block content %}
<h1 class="text-xl font-semibold mb-4">Settings</h1>
{% if cleared %}
  <div class="mb-4 rounded border border-green-800 bg-green-900/40 px-4 py-3 text-sm text-green-100">
    All application data has been cleared.
  </div>
{% endif %}
<form method="post" action="/settings" class="space-y-4 bg-neutral-950 p-4 rounded border border-neutral-800">
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <label class="block">
      <span class="block text-sm text-neutral-400">Theme</span>
      <select name="theme" class="bg-neutral-800 rounded px-2 py-1 w-full">
        <option value="dark" {% if cfg.ui.theme == 'dark' %}selected{% endif %}>Dark</option>
        <option value="light" {% if cfg.ui.theme == 'light' %}selected{% endif %}>Light</option>
      </select>
    </label>
    <label class="block">
      <span class="block text-sm text-neutral-400">Show numbers inside cells</span>
      <select name="show_text" class="bg-neutral-800 rounded px-2 py-1 w-full">
        <option value="true" {% if cfg.ui.show_text %}selected{% endif %}>True</option>
        <option value="false" {% if not cfg.ui.show_text %}selected{% endif %}>False</option>
      </select>
    </label>
    <label class="block">
      <span class="block text-sm text-neutral-400">Display weekends</span>
      <select name="show_weekends" class="bg-neutral-800 rounded px-2 py-1 w-full">
        <option value="false" {% if not cfg.ui.show_weekends %}selected{% endif %}>Hide</option>
        <option value="true" {% if cfg.ui.show_weekends %}selected{% endif %}>Show</option>
      </select>
    </label>
    <label class="block">
      <span class="block text-sm text-neutral-400">Default month view</span>
      <select name="default_view" class="bg-neutral-800 rounded px-2 py-1 w-full">
        <option value="latest" {% if cfg.view.default == 'latest' %}selected{% endif %}>Latest</option>
        <option value="last_viewed" {% if cfg.view.default == 'last_viewed' %}selected{% endif %}>Last Viewed</option>
      </select>
    </label>
    <label class="block">
      <span class="block text-sm text-neutral-400">Action icon color</span>
      <input type="color" name="icon_color" value="{{ cfg.ui.icon_color }}"
             class="bg-neutral-800 rounded px-2 py-1 w-full h-10 p-1 cursor-pointer">
    </label>
  </div>
  <button class="px-4 py-2 bg-blue-600 rounded hover:bg-blue-500">Save</button>
</form>

<form method="post" action="/settings/clear-data" onsubmit="return confirm('This will delete all trades, summaries, and notes. Continue?');"
      class="mt-6 space-y-3 rounded border border-red-900 bg-red-950/40 p-4">
  <div>
    <h2 class="text-lg font-semibold text-red-200">Danger zone</h2>
    <p class="text-sm text-red-100/80">
      Clearing data removes every imported trade, calculated summary, and saved note. This action cannot be undone.
    </p>
  </div>
  <button class="px-4 py-2 rounded bg-red-600 text-white hover:bg-red-500">Clear all data</button>
</form>
{% endblock %}
